<!-- dynamic-copyright-plugin.html -->
<!-- Injects a dynamic copyright footer with config panel, toggle, and theme support -->

<!-- Plugin Manifest -->
<script type="application/json" id="plugin-manifest">
  {
    "name": "dynamic-copyright-plugin",
    "version": "1.1.0",
    "author": "Mosberg",
    "description": "Injects a dynamic copyright footer with branding, config panel, and theme support.",
    "inject": ["footer", "script", "style", "config"],
    "tags": ["footer", "branding", "accessibility", "configurable"]
  }
</script>

<!-- dynamic-copyright-plugin-config -->
<div id="copyright-config-panel" style="margin: 1em 0">
  <label>
    Creator Name:
    <input type="text" id="creator-input" placeholder="Mosberg" />
  </label>
  <label style="margin-left: 1em">
    Theme:
    <select id="theme-select">
      <option value="dark">Dark</option>
      <option value="light">Light</option>
      <option value="retro">Retro</option>
    </select>
  </label>
  <label style="margin-left: 1em">
    <input type="checkbox" id="toggle-footer" checked />
    Show Footer
  </label>
</div>

<!-- dynamic-copyright-plugin-footer -->
<footer id="copyright-footer" role="contentinfo" aria-label="Site copyright">
  <p>
    &copy; <span id="year-range" aria-label="Copyright year range"></span>
    <span class="creator-name">Created by Mosberg</span>. All rights reserved.
  </p>
</footer>

<!-- dynamic-copyright-plugin-script -->
<script type="module" id="dynamic-copyright-plugin-script">
  const startYear = 2025;
  const currentYear = new Date().getFullYear();
  const yearRange =
    currentYear > startYear ? `${startYear}â€“${currentYear}` : `${startYear}`;
  const yearSpan = document.getElementById("year-range");
  if (yearSpan) yearSpan.textContent = yearRange;

  const creatorInput = document.getElementById("creator-input");
  const creatorSpan = document.querySelector(".creator-name");
  const themeSelect = document.getElementById("theme-select");
  const footer = document.getElementById("copyright-footer");
  const toggle = document.getElementById("toggle-footer");

  // Update creator name
  creatorInput?.addEventListener("input", () => {
    creatorSpan.textContent = `Created by ${creatorInput.value || "Mosberg"}`;
  });

  // Theme switching
  const applyTheme = (theme) => {
    document.documentElement.setAttribute("data-theme", theme);
  };
  themeSelect?.addEventListener("change", () => applyTheme(themeSelect.value));
  applyTheme(themeSelect?.value || "dark");

  // Toggle footer visibility
  toggle?.addEventListener("change", () => {
    footer.style.display = toggle.checked ? "block" : "none";
  });
</script>

<!-- dynamic-copyright-plugin-style -->
<style id="dynamic-copyright-plugin-style">
  footer {
    font-size: 0.9rem;
    text-align: center;
    padding: 1em;
    background-color: var(--footer-bg, #1e1e2f);
    color: var(--footer-text, #f0f0f0);
  }

  .creator-name {
    font-weight: bold;
    color: var(--creator-color, #27ae60);
  }

  /* Theme variables */
  [data-theme="dark"] {
    --footer-bg: #1e1e2f;
    --footer-text: #f0f0f0;
    --creator-color: #27ae60;
  }

  [data-theme="light"] {
    --footer-bg: #f0f0f0;
    --footer-text: #222;
    --creator-color: #0077cc;
  }

  [data-theme="retro"] {
    --footer-bg: #fff8e1;
    --footer-text: #5c3317;
    --creator-color: #d35400;
  }
</style>
